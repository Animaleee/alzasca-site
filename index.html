<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ALZASCA Ingegneria — Progetti e direzione lavori in Ticino</title>
  <meta name="description" content="Studio di ingegneria civile in Ticino: genio civile, strutture, edilizia e consulenza energetica. Soluzioni snelle, tempi chiari." />
  <meta name="theme-color" content="#0b1220" />
  <style>
    :root{
      --bg:#0b1220; --panel:#0f172a; --panel-2:#111827;
      --text:#e5e7eb; --muted:#94a3b8;
      --line:#1f2937; --line-2:#334155; --shadow:0 10px 24px rgba(0,0,0,.25);
      --papaya:#FF8A4C; --royal:#4169E1;
      --focus:0 0 0 3px rgba(255,138,76,.35), 0 0 0 6px rgba(255,138,76,.15);
    }
    html,body{height:100%}
    body{margin:0;background:var(--bg);color:var(--text);
      font:16px/1.55 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,"Helvetica Neue",Arial;
      -webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility;scroll-behavior:smooth}
    img{display:block;max-width:100%} a{text-decoration:none;color:inherit}
    .container{max-width:1120px;margin-inline:auto;padding-inline:16px}
    .btn{display:inline-flex;align-items:center;gap:10px;padding:12px 18px;border-radius:14px;font-weight:700;border:1px solid transparent;cursor:pointer;transition:.16s}
    .btn:focus-visible{outline:none;box-shadow:var(--focus)}
    .btn-primary{background:var(--papaya);color:#111827}.btn-primary:hover{transform:translateY(-1px)}
    .btn-secondary{background:var(--royal);color:#fff}.btn-secondary:hover{transform:translateY(-1px)}
    .btn-ghost{background:transparent;border-color:var(--line-2)}.btn-ghost:hover{background:#0b1326}

    .site-header{position:sticky;top:0;z-index:40;background:rgba(11,18,32,.7);backdrop-filter:blur(8px);border-bottom:1px solid var(--line)}
    .nav{display:flex;align-items:center;justify-content:space-between;padding:12px 0}
    .brand{display:flex;align-items:center;gap:10px;font-weight:800;font-size:20px}
    .logo{width:32px;height:32px;border-radius:10px;background:var(--papaya)}
    .nav-links{display:flex;align-items:center;gap:18px;font-size:14px}
    .nav-cta{padding:8px 14px;border-radius:999px;background:var(--papaya);color:#111827;font-weight:800}
    .lang{display:flex;gap:8px}
    .lang a{padding:6px 10px;border-radius:10px;border:1px solid var(--line-2);color:var(--muted)}
    .lang a.active{border-color:var(--papaya);color:#111827;background:var(--papaya)}

    .hero{padding-block:76px}
    .grid-hero{display:grid;grid-template-columns:1fr;gap:28px}
    .eyebrow{text-transform:uppercase;letter-spacing:.2em;font-size:12px;color:var(--muted)}
    h1{margin:8px 0 0;font-size:clamp(32px,4vw,44px);line-height:1.08}
    .muted{color:var(--muted)}
    .lead{margin-top:14px;font-size:18px;color:#cbd5e1;max-width:64ch}
    .hero-actions{margin-top:26px;display:flex;flex-wrap:wrap;gap:12px}
    .bullets{margin-top:18px;display:grid;grid-template-columns:1fr;gap:10px;font-size:14px;color:#cbd5e1}
    .bullet{display:flex;align-items:center;gap:10px}
    .dot-r{width:8px;height:8px;border-radius:999px;background:var(--royal)}
    .visual{border:1px solid var(--line);border-radius:22px;background:var(--panel);box-shadow:var(--shadow);aspect-ratio:4/3;display:grid;place-items:center;text-align:center;padding:22px}

    section{padding-block:64px} h2{font-size:clamp(22px,2.6vw,32px);margin:0}
    .section-head{display:flex;align-items:flex-end;justify-content:space-between;gap:12px}
    .cards{display:grid;grid-template-columns:1fr;gap:18px;margin-top:20px}
    .card{background:var(--panel);border:1px solid var(--line);border-radius:18px;padding:18px;transition:.16s}
    .card:hover{transform:translateY(-3px);box-shadow:var(--shadow);background:#0e1731}
    .icon{width:36px;height:36px;border-radius:10px;background:var(--royal);margin-bottom:10px}
    .project-img{background:#0e1936;border:1px dashed var(--line-2);color:#8ea0c6;aspect-ratio:4/3;display:grid;place-items:center}
    .about{background:var(--panel-2);border-block:1px solid var(--line)}

    form{display:grid;gap:12px}.field{display:grid;gap:6px}
    .input,.textarea,.select{width:100%;background:#0b1326;color:var(--text);border:1px solid var(--line-2);border-radius:12px;padding:12px 14px;font:inherit}
    .textarea{min-height:120px;resize:vertical}
    .input:focus-visible,.textarea:focus-visible,.select:focus-visible{outline:none;box-shadow:var(--focus);border-color:var(--papaya)}
    footer{border-top:1px solid var(--line);padding-block:22px;font-size:14px;color:var(--muted)}

    @media (min-width:640px){.bullets{grid-template-columns:repeat(3,minmax(0,1fr))}.cards{grid-template-columns:repeat(2,minmax(0,1fr))}}
    @media (min-width:900px){.grid-hero{grid-template-columns:1.05fr .95fr;align-items:center}.cards{grid-template-columns:repeat(3,minmax(0,1fr))}}
    @media (prefers-reduced-motion:reduce){.btn,.card{transition:none}}
  </style>
</head>
<body>
  <header class="site-header">
    <div class="container nav" data-testid="nav">
      <a class="brand" href="#top" aria-label="ALZASCA Ingegneria">
        <span class="logo" aria-hidden="true"></span><span>ALZASCA Ingegneria</span>
      </a>
      <nav class="nav-links" aria-label="Principale">
        <a href="#servizi" data-i18n="nav.services">Servizi</a>
        <a href="#cosa" data-i18n="nav.now">Cosa stiamo facendo</a>
        <a href="#progetti" data-i18n="nav.projects">Progetti</a>
        <a href="#chisiamo" data-i18n="nav.team">Chi siamo</a>
        <a class="nav-cta" href="#contatti" data-i18n="nav.contact">Contatti</a>
      </nav>
      <div class="lang" role="group" aria-label="Language switch">
        <a href="?lang=it" id="lang-it">IT</a>
        <a href="?lang=de" id="lang-de">DE</a>
      </div>
    </div>
  </header>

  <main id="top">
    <section class="hero" aria-labelledby="hero-title">
      <div class="container grid-hero">
        <div>
          <p class="eyebrow" data-i18n="hero.eyebrow">Studio di ingegneria civile · Ticino</p>
          <h1 id="hero-title">
            <span data-i18n="hero.title1">Progetti e direzione lavori in tutto il Ticino.</span><br>
            <span class="muted" data-i18n="hero.title2">Dall’idea al collaudo, con un unico interlocutore.</span>
          </h1>
          <p class="lead" data-i18n="hero.lead">
            Progettiamo opere di genio civile, strutture ed edilizia. Consulenza energetica per privati e pubblici con focus incentivi.
          </p>
          <div class="hero-actions">
            <a class="btn btn-primary" href="#preventivo" data-i18n="cta.estimate">Calcola un preventivo</a>
            <a class="btn btn-ghost" href="#contatti" data-i18n="cta.talk">Parliamo del tuo progetto</a>
          </div>
          <div class="bullets">
            <div class="bullet"><span class="dot-r"></span><span data-i18n="bullets.dl">Direzione lavori</span></div>
            <div class="bullet"><span class="dot-r"></span><span data-i18n="bullets.pratiche">Pratiche e autorizzazioni</span></div>
            <div class="bullet"><span class="dot-r"></span><span data-i18n="bullets.energy">Consulenza energetica</span></div>
          </div>
        </div>
        <div class="visual" role="img" aria-label="Anteprima progetto">
          <div>
            <div style="width:48px;height:48px;border-radius:999px;background:#243b76;margin-inline:auto;margin-bottom:10px"></div>
            <p style="font-weight:800" data-i18n="hero.img">Sostituire con immagine di cantiere/progetto</p>
            <p class="muted" style="font-size:13px">1600×1200 · WebP</p>
          </div>
        </div>
      </div>
    </section>

    <section id="servizi" aria-labelledby="servizi-title">
      <div class="container">
        <div class="section-head">
          <h2 id="servizi-title" data-i18n="services.title">Servizi principali</h2>
          <a class="btn btn-ghost" href="#contatti" data-i18n="cta.talk">Parliamo del tuo progetto</a>
        </div>
        <div class="cards">
          <article class="card" data-testid="service-card"><div class="icon"></div>
            <h3 data-i18n="services.edilizia.title">Edilizia & Direzione Lavori</h3>
            <p class="muted" data-i18n="services.edilizia.desc">Progettazione esecutiva, computi, DL, sicurezza.</p>
          </article>
          <article class="card" data-testid="service-card"><div class="icon"></div>
            <h3 data-i18n="services.strutture.title">Strutture</h3>
            <p class="muted" data-i18n="services.strutture.desc">Calcestruzzo, acciaio, legno; verifiche e rinforzi.</p>
          </article>
          <article class="card" data-testid="service-card"><div class="icon"></div>
            <h3 data-i18n="services.gc.title">Genio civile</h3>
            <p class="muted" data-i18n="services.gc.desc">Opere stradali, idrauliche, regimazioni, drenaggi.</p>
          </article>
          <article class="card" data-testid="service-card"><div class="icon"></div>
            <h3 data-i18n="services.rustici.title">Rustici fuori zona</h3>
            <p class="muted" data-i18n="services.rustici.desc">Verifiche, progetto, autorizzazioni, DL.</p>
          </article>
          <article class="card" data-testid="service-card"><div class="icon"></div>
            <h3 data-i18n="services.energy.title">Consulenza energetica</h3>
            <p class="muted" data-i18n="services.energy.desc">Privati e pubblici: diagnosi, priorità, incentivi.</p>
          </article>
          <article class="card" data-testid="service-card"><div class="icon"></div>
            <h3 data-i18n="services.comuni.title">Per i Comuni</h3>
            <p class="muted" data-i18n="services.comuni.desc">Bandi, perizie, manutenzioni, iter autorizzativi.</p>
          </article>
        </div>
      </div>
    </section>

    <section id="cosa" aria-labelledby="cosa-title">
      <div class="container">
        <div class="section-head">
          <h2 id="cosa-title" data-i18n="now.title">Cosa stiamo facendo</h2>
          <a class="btn btn-ghost" href="#contatti" data-i18n="now.cta">Segnala un cantiere</a>
        </div>
        <div id="cosa-grid" class="cards">
          <article class="card"><div class="project-img">/cosa/01.jpg</div></article>
          <article class="card"><div class="project-img">/cosa/02.jpg</div></article>
          <article class="card"><div class="project-img">/cosa/03.jpg</div></article>
        </div>
        <p class="muted" style="margin-top:10px" data-i18n="now.hint">Aggiungi foto in /cosa/ (01.jpg … 12.jpg) o definisci un file /cosa/cosa.json.</p>
      </div>
    </section>

    <section id="progetti" aria-labelledby="progetti-title">
      <div class="container">
        <div class="section-head">
          <h2 id="progetti-title" data-i18n="projects.title">Progetti recenti</h2>
          <a class="btn btn-ghost" href="#contatti" data-i18n="projects.cta">Parla con noi</a>
        </div>
        <div class="cards">
          <article class="card"><div class="project-img">Rustico / fuori zona</div></article>
          <article class="card"><div class="project-img">Vallo di protezione</div></article>
          <article class="card"><div class="project-img">Stalla</div></article>
          <article class="card"><div class="project-img">Edificio residenziale</div></article>
          <article class="card"><div class="project-img">Struttura metallica</div></article>
        </div>
      </div>
    </section>

    <section id="chisiamo" class="about" aria-labelledby="about-title">
      <div class="container">
        <h2 id="about-title" data-i18n="team.title">Chi siamo</h2>
        <p class="muted" style="margin:10px 0 18px" data-i18n="team.lead">
          Lavoriamo in modo multidisciplinare: ingegneri, architetti e direttori dei lavori. Meno passaggi, più controllo sui risultati.
        </p>
        <div class="cards">
          <article class="card">
            <h3>Samir Tomamichel</h3>
            <p class="muted" data-i18n="team.samir">Titolare · Ingegnere civile. Guida il coordinamento tra progetto, pratiche e cantiere.</p>
          </article>
          <article class="card">
            <h3>Micaela Biadici</h3>
            <p class="muted" data-i18n="team.micaela">Architettura e dettaglio. Materiali, spazi e scelte operative in fase esecutiva.</p>
          </article>
          <article class="card">
            <h3>Matteo Pedroia</h3>
            <p class="muted" data-i18n="team.matteo">Direzione lavori e strutture. Statica, verifiche e gestione imprese in cantiere.</p>
          </article>
        </div>
      </div>
    </section>

    <section id="preventivo" aria-labelledby="prev-title">
      <div class="container">
        <div class="section-head"><h2 id="prev-title" data-i18n="estimate.title">Calcola un preventivo (indicativo, non vincolante)</h2></div>
        <div class="cards" style="grid-template-columns:1.15fr .85fr">
          <div class="card">
            <form id="estimator" novalidate>
              <div class="field">
                <label for="superficie" data-i18n="estimate.surface">Superficie (m²)</label>
                <input class="input" id="superficie" type="number" min="0" step="1" required />
              </div>
              <div class="field">
                <label data-i18n="estimate.params">Parametri</label>
                <div style="display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:8px">
                  <label><input type="checkbox" id="abitativo"/> <span data-i18n="estimate.abitativo">Abitativo</span></label>
                  <label><input type="checkbox" id="ristrutturazione"/> <span data-i18n="estimate.ristrutturazione">Ristrutturazione</span></label>
                  <label><input type="checkbox" id="fuorizona"/> <span data-i18n="estimate.fuorizona">Fuori zona</span></label>
                  <label><input type="checkbox" id="riscaldamento"/> <span data-i18n="estimate.riscaldamento">Riscaldamento</span></label>
                </div>
              </div>
              <div style="display:flex;gap:10px;flex-wrap:wrap">
                <button class="btn btn-primary" type="submit" data-i18n="estimate.calc">Calcola</button>
                <button class="btn btn-ghost" type="button" id="clear-est" data-i18n="estimate.clear">Pulisci</button>
              </div>
              <p id="result" class="muted" style="margin-top:10px"></p>
            </form>
          </div>
          <div class="card">
            <h3 data-i18n="estimate.how">Come calcoliamo</h3>
            <ul class="muted" style="margin:6px 0 0 18px">
              <li>Base 4’500 CHF</li><li>+1’000: Abitativo</li><li>+1’000: Ristrutturazione</li>
              <li>+1’000: Media (&gt;100 m²)</li><li>+3’000: Grande (&gt;300 m²)</li>
              <li>+1’000: Fuori zona</li><li>+500: Riscaldamento</li>
            </ul>
            <p class="muted" style="margin-top:10px" data-i18n="estimate.note">Mostriamo un range ±15% e prepariamo una mail precompilata con i dettagli.</p>
          </div>
        </div>
      </div>
    </section>

    <section id="contatti" aria-labelledby="contatti-title">
      <div class="container">
        <div class="section-head"><h2 id="contatti-title" data-i18n="contact.title">Contatti</h2></div>
        <div class="cards" style="grid-template-columns:1.15fr .85fr">
          <div class="card">
            <form id="contact-form" novalidate>
              <div class="field"><label for="nome" data-i18n="contact.name">Nome e cognome</label><input class="input" id="nome" name="nome" autocomplete="name" required /></div>
              <div class="field"><label for="email">Email</label><input class="input" id="email" name="email" type="email" autocomplete="email" required /></div>
              <div class="field"><label for="tema" data-i18n="contact.topic">Tema</label>
                <select class="select" id="tema" name="tema" required>
                  <option value="" disabled selected data-i18n="contact.sel">Seleziona…</option>
                  <option>Strutture</option><option>Genio civile</option><option>Edilizia / DL</option>
                  <option>Rustici fuori zona</option><option>Consulenza energetica</option><option>Altro</option>
                </select>
              </div>
              <div class="field"><label for="messaggio" data-i18n="contact.msg">Messaggio</label><textarea class="textarea" id="messaggio" name="messaggio" required></textarea></div>
              <div style="position:absolute;left:-10000px" aria-hidden="true"><label for="hp">Non compilare</label><input id="hp" name="hp" type="text" tabindex="-1" autocomplete="off" /></div>
              <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:6px">
                <button class="btn btn-secondary" type="submit" data-i18n="contact.send">Invia</button>
                <a class="btn btn-ghost" href="mailto:info@alzasca.ch">info@alzasca.ch</a>
              </div>
              <p id="status" class="muted" role="status" style="margin:8px 0 0"></p>
            </form>
          </div>
          <div class="card">
            <div class="cards" style="grid-template-columns:1fr 1fr">
              <div class="card" style="padding:12px"><div class="muted" data-i18n="contact.phone">Telefono</div><div style="font-weight:800;font-size:18px">091 760 70 56</div></div>
              <div class="card" style="padding:12px"><div class="muted" data-i18n="contact.mobile">Cellulare (Samir)</div><div style="font-weight:800;font-size:18px">079 541 72 60</div></div>
            </div>
            <div class="card" style="margin-top:12px;padding:12px"><div class="muted">Email</div><div style="font-weight:800;font-size:18px">info@alzasca.ch</div></div>
            <div class="card" style="margin-top:12px;padding:12px"><div class="muted" data-i18n="contact.address">Ufficio</div><div style="font-weight:800;font-size:18px">Via Valmaggina 53, 6676 Bignasco</div></div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <footer>
    <div class="container" style="display:flex;align-items:center;justify-content:space-between;gap:14px;flex-wrap:wrap">
      <div>© <span id="y"></span> ALZASCA Ingegneria</div>
      <div style="display:flex;gap:16px"><a href="#" data-i18n="footer.privacy">Privacy</a><a href="#" data-i18n="footer.legal">Note legali</a></div>
    </div>
  </footer>

  <script>
    const translations = {
      it:{'nav.services':'Servizi','nav.now':'Cosa stiamo facendo','nav.projects':'Progetti','nav.team':'Chi siamo','nav.contact':'Contatti',
        'hero.eyebrow':'Studio di ingegneria civile · Ticino','hero.title1':'Progetti e direzione lavori in tutto il Ticino.','hero.title2':'Dall’idea al collaudo, con un unico interlocutore.',
        'hero.lead':'Progettiamo opere di genio civile, strutture ed edilizia. Consulenza energetica per privati e pubblici con focus incentivi.','hero.img':'Sostituire con immagine di cantiere/progetto',
        'cta.estimate':'Calcola un preventivo','cta.talk':'Parliamo del tuo progetto',
        'bullets.dl':'Direzione lavori','bullets.pratiche':'Pratiche e autorizzazioni','bullets.energy':'Consulenza energetica',
        'services.title':'Servizi principali','services.edilizia.title':'Edilizia & Direzione Lavori','services.edilizia.desc':'Progettazione esecutiva, computi, DL, sicurezza.',
        'services.strutture.title':'Strutture','services.strutture.desc':'Calcestruzzo, acciaio, legno; verifiche e rinforzi.',
        'services.gc.title':'Genio civile','services.gc.desc':'Opere stradali, idrauliche, regimazioni, drenaggi.',
        'services.rustici.title':'Rustici fuori zona','services.rustici.desc':'Verifiche, progetto, autorizzazioni, DL.',
        'services.energy.title':'Consulenza energetica','services.energy.desc':'Privati e pubblici: diagnosi, priorità, incentivi.',
        'services.comuni.title':'Per i Comuni','services.comuni.desc':'Bandi, perizie, manutenzioni, iter autorizzativi.',
        'now.title':'Cosa stiamo facendo','now.cta':'Segnala un cantiere','now.hint':'Aggiungi foto in /cosa/ (01.jpg … 12.jpg) o definisci un file /cosa/cosa.json.',
        'projects.title':'Progetti recenti','projects.cta':'Parla con noi',
        'team.title':'Chi siamo','team.lead':'Lavoriamo in modo multidisciplinare: ingegneri, architetti e direttori dei lavori. Meno passaggi, più controllo sui risultati.',
        'team.samir':'Titolare · Ingegnere civile. Guida il coordinamento tra progetto, pratiche e cantiere.',
        'team.micaela':'Architettura e dettaglio. Materiali, spazi e scelte operative in fase esecutiva.',
        'team.matteo':'Direzione lavori e strutture. Statica, verifiche e gestione imprese in cantiere.',
        'estimate.title':'Calcola un preventivo (indicativo, non vincolante)','estimate.surface':'Superficie (m²)','estimate.params':'Parametri',
        'estimate.abitativo':'Abitativo','estimate.ristrutturazione':'Ristrutturazione','estimate.fuorizona':'Fuori zona','estimate.riscaldamento':'Riscaldamento',
        'estimate.calc':'Calcola','estimate.clear':'Pulisci','estimate.how':'Come calcoliamo','estimate.note':'Mostriamo un range ±15% e prepariamo una mail precompilata con i dettagli.',
        'contact.title':'Contatti','contact.name':'Nome e cognome','contact.topic':'Tema','contact.sel':'Seleziona…','contact.msg':'Messaggio',
        'contact.phone':'Telefono','contact.mobile':'Cellulare (Samir)','contact.address':'Ufficio',
        'footer.privacy':'Privacy','footer.legal':'Note legali'
      },
      de:{'nav.services':'Leistungen','nav.now':'Woran wir arbeiten','nav.projects':'Projekte','nav.team':'Über uns','nav.contact':'Kontakt',
        'hero.eyebrow':'Ingenieurbüro · Tessin','hero.title1':'Planung und Bauleitung im ganzen Tessin.','hero.title2':'Von der Idee bis zur Abnahme – ein einziger Ansprechpartner.',
        'hero.lead':'Planung im Hoch- und Tiefbau, Tragwerke. Energieberatung für Private und öffentliche Hand mit Fokus Förderprogramme.','hero.img':'Hier Bau-/Projektfoto einfügen',
        'cta.estimate':'Kostenvoranschlag berechnen','cta.talk':'Ihr Projekt besprechen',
        'bullets.dl':'Bauleitung','bullets.pratiche':'Bewilligungen','bullets.energy':'Energieberatung',
        'services.title':'Leistungen','services.edilizia.title':'Hochbau & Bauleitung','services.edilizia.desc':'Ausführungsplanung, Kosten, BL, Sicherheit.',
        'services.strutture.title':'Tragwerke','services.strutture.desc':'Beton, Stahl, Holz; Nachweise und Verstärkungen.',
        'services.gc.title':'Tiefbau','services.gc.desc':'Strassen-, Wasserbau, Entwässerungen.',
        'services.rustici.title':'Rustici ausserhalb Bauzone','services.rustici.desc':'Prüfungen, Projekt, Bewilligungen, Bauleitung.',
        'services.energy.title':'Energieberatung','services.energy.desc':'Privat & öffentlich: Diagnose, Prioritäten, Förderungen.',
        'services.comuni.title':'Für Gemeinden','services.comuni.desc':'Ausschreibungen, Gutachten, Unterhalt, Verfahren.',
        'now.title':'Woran wir arbeiten','now.cta':'Baustelle melden','now.hint':'Bilder in /cosa/ (01.jpg … 12.jpg) ablegen oder /cosa/cosa.json definieren.',
        'projects.title':'Aktuelle Projekte','projects.cta':'Kontakt aufnehmen',
        'team.title':'Über uns','team.lead':'Multidisziplinär: Ingenieure, Architekten und Bauleitung. Weniger Schnittstellen, mehr Qualität.',
        'team.samir':'Inhaber · Bauingenieur. Koordiniert Planung, Verfahren und Baustelle.',
        'team.micaela':'Architektur und Detail. Materialien, Räume, Ausführung.',
        'team.matteo':'Bauleitung und Tragwerke. Statik, Nachweise, Unternehmersteuerung.',
        'estimate.title':'Kostenvoranschlag (unverbindlich)','estimate.surface':'Fläche (m²)','estimate.params':'Parameter',
        'estimate.abitativo':'Wohnnutzung','estimate.ristrutturazione':'Sanierung','estimate.fuorizona':'Ausserhalb Bauzone','estimate.riscaldamento':'Heizung',
        'estimate.calc':'Berechnen','estimate.clear':'Zurücksetzen','estimate.how':'Unsere Berechnung','estimate.note':'Wir zeigen ±15 % und bereiten eine voradressierte E-Mail vor.',
        'contact.title':'Kontakt','contact.name':'Name und Vorname','contact.topic':'Thema','contact.sel':'Auswählen…','contact.msg':'Nachricht',
        'contact.phone':'Telefon','contact.mobile':'Mobil (Samir)','contact.address':'Büro',
        'footer.privacy':'Datenschutz','footer.legal':'Impressum'
      }
    };
    function getLang(){ const q=new URL(location.href).searchParams.get('lang'); const s=localStorage.getItem('lang'); return (q||s||'it'); }
    function setLang(lang){
      const dict=translations[lang]||translations.it;
      document.querySelectorAll('[data-i18n]').forEach(el=>{ const k=el.getAttribute('data-i18n'); if(dict[k]) el.textContent=dict[k]; });
      document.documentElement.lang=lang; localStorage.setItem('lang',lang);
      document.getElementById('lang-it').classList.toggle('active',lang==='it');
      document.getElementById('lang-de').classList.toggle('active',lang==='de');
    }
    async function loadCosa(){
      const grid=document.getElementById('cosa-grid'); if(!grid) return;
      const items=[];
      try{ const r=await fetch('./cosa/cosa.json',{cache:'no-store'}); if(r.ok){ const d=await r.json(); if(Array.isArray(d)) d.forEach(i=>items.push(i)); } }catch(_){}
      if(items.length===0){
        const exts=['webp','jpg','jpeg','png'];
        for(let i=1;i<=12;i++){
          const base=String(i).padStart(2,'0'); let found=null;
          for(const ext of exts){
            const src=`./cosa/${base}.${ext}`;
            const ok=await new Promise(res=>{ const im=new Image(); im.onload=()=>res(true); im.onerror=()=>res(false); im.src=src+'?v='+Date.now(); });
            if(ok){ found={src,title:`${base}`,subtitle:''}; break; }
          }
          if(found) items.push(found);
        }
      }
      if(items.length){ grid.innerHTML=''; items.forEach(it=>{ const card=document.createElement('article'); card.className='card';
        card.innerHTML=`<figure class="project-img"><img src="${it.src}" alt="${it.title||'Cantiere'}"/></figure>${(it.title||it.subtitle)?`<div style="padding-top:10px"><h3 style="margin:0">${it.title||''}</h3><p class="muted" style="margin:6px 0 0 0">${it.subtitle||''}</p></div>`:''}`;
        grid.appendChild(card); }); }
    }
    function formatCHF(n){ return new Intl.NumberFormat('it-CH',{style:'currency',currency:'CHF',maximumFractionDigits:0}).format(n); }
    function computeEstimate(){
      const s=Number(document.getElementById('superficie').value||0);
      const abit=document.getElementById('abitativo').checked;
      const ristr=document.getElementById('ristrutturazione').checked;
      const fuori=document.getElementById('fuorizona').checked;
      const heat=document.getElementById('riscaldamento').checked;
      let tot=4500;
      if(abit) tot+=1000;
      if(ristr) tot+=1000;
      if(s>100) tot+=1000;
      if(s>300) tot+=3000; // se vuoi solo +3000 (senza +1000) sopra i 300 m², dillo e lo cambio
      if(fuori) tot+=1000;
      if(heat) tot+=500;
      const low=Math.round(tot*0.85), high=Math.round(tot*1.15);
      return {tot,low,high};
    }
    function setupEstimator(){
      const form=document.getElementById('estimator'); const out=document.getElementById('result');
      document.getElementById('clear-est')?.addEventListener('click',()=>{form.reset();out.textContent='';});
      form?.addEventListener('submit',(e)=>{e.preventDefault();
        const s=Number(document.getElementById('superficie').value||0);
        if(!(s>0)){ out.textContent='Inserisci una superficie valida.'; out.style.color='#fca5a5'; return; }
        const {tot,low,high}=computeEstimate(); out.style.color='#cbd5e1';
        out.innerHTML=`Stima: <b>${formatCHF(tot)}</b> (range ${formatCHF(low)} – ${formatCHF(high)}).`;
        const lang=getLang(); const subject=lang==='de'?'Unverbindliche Kostenschätzung':'Preventivo indicativo';
        const body=[
          lang==='de'?'Hallo ALZASCA,':'Buongiorno ALZASCA,','',
          lang==='de'?`Fläche: ${s} m²`:`Superficie: ${s} m²`,
          `Abitativo/Wohnnutzung: ${document.getElementById('abitativo').checked?'Sì/Ja':'No/Nein'}`,
          `Ristrutturazione/Sanierung: ${document.getElementById('ristrutturazione').checked?'Sì/Ja':'No/Nein'}`,
          `Fuori zona/Ausserhalb Bauzone: ${document.getElementById('fuorizona').checked?'Sì/Ja':'No/Nein'}`,
          `Riscaldamento/Heizung: ${document.getElementById('riscaldamento').checked?'Sì/Ja':'No/Nein'}`,'',
          `Stima: ${formatCHF(tot)} (range ${formatCHF(low)} – ${formatCHF(high)})`,'',
          lang==='de'?'Bitte kontaktieren Sie mich.':'Vi chiedo un contatto.',
        ].join('%0A');
        out.insertAdjacentHTML('beforeend',` <a class="btn btn-secondary" style="margin-left:10px" href="mailto:info@alzasca.ch?subject=${encodeURIComponent(subject)}&body=${body}">Invia richiesta</a>`);
      });
    }
    function setupContact(){
      const form=document.getElementById('contact-form'); const status=document.getElementById('status');
      form?.addEventListener('submit',(e)=>{e.preventDefault(); status.textContent='';
        const data=new FormData(form);
        if((data.get('hp')||'').toString().trim()!=='') return;
        const errors=[]; if(!data.get('nome')) errors.push('Nome mancante');
        const email=(data.get('email')||'').toString(); if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) errors.push('Email invalida');
        if(!data.get('tema')) errors.push('Seleziona un tema'); if(!data.get('messaggio')) errors.push('Messaggio mancante');
        if(errors.length){ status.textContent='Errore: '+errors.join(' · '); status.style.color='#fca5a5'; return; }
        status.textContent='Inviato. Ti rispondiamo entro 24 ore (giorni lavorativi).'; status.style.color='#86efac'; form.reset();
      });
    }
    document.getElementById('y').textContent=new Date().getFullYear();
    const lang=getLang(); setLang(lang);
    document.getElementById('lang-it').addEventListener('click',(e)=>{e.preventDefault(); setLang('it'); history.replaceState(null,'',location.pathname+'?lang=it');});
    document.getElementById('lang-de').addEventListener('click',(e)=>{e.preventDefault(); setLang('de'); history.replaceState(null,'',location.pathname+'?lang=de');});
    loadCosa(); setupEstimator(); setupContact();
  </script>
</body>
</html>
